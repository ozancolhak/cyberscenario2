<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nihai Fidye YazÄ±lÄ±mÄ± SimÃ¼lasyonu</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/dracula.min.css">
    <style>
        :root {
            --dark-bg: #1a1a2e; --container-bg: #2a2a4a; --section-bg: #333355; --interactive-bg: #444466;
            --accent-blue: #8be9fd; --accent-purple: #bd93f9; --accent-pink: #ff79c6; --accent-green: #50fa7b;
            --accent-yellow: #f1fa8c; --accent-red: #ff5555; --text-light: #e0e0e0; --text-dark: #282a36;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        body { font-family: 'Roboto', sans-serif; background-color: var(--dark-bg); color: var(--text-light); margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; }
        .container { background-color: var(--container-bg); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); padding: 40px; max-width: 900px; width: 100%; margin: 40px 0; }
        .centered-page { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; min-height: 60vh; animation: fadeIn 0.5s ease-out; }
        h1 { font-size: 2.5em; color: var(--accent-blue); margin-bottom: 20px; }
        h2 { font-size: 2em; color: var(--accent-blue); border-bottom: 2px solid var(--interactive-bg); padding-bottom: 15px; margin-bottom: 25px; }
        h3 { font-size: 1.5em; color: var(--accent-blue); }
        h4 { font-size: 1.2em; color: var(--accent-purple); text-align: left; margin-top: 0; border-bottom: 1px solid var(--interactive-bg); padding-bottom: 10px; }
        p { line-height: 1.7; font-size: 1.1em; }
        .section { display: none; padding: 30px; background-color: var(--section-bg); border-radius: 8px; margin-top: 25px; animation: fadeIn 0.5s ease-out; }
        .interactive-element { background-color: var(--interactive-bg); border-radius: 8px; padding: 20px; margin-top: 20px; }
        .decision-buttons { display: flex; flex-direction: column; gap: 15px; margin-top: 30px; }
        .btn { background-color: #6272a4; color: white; border: none; padding: 15px 25px; border-radius: 8px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; text-align: left; display: flex; align-items: center; gap: 15px; font-weight: 700; }
        .btn:hover { background-color: #7a8ab9; transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .btn:disabled { background-color: #555 !important; color: #999 !important; cursor: not-allowed; transform: none; box-shadow: none; opacity: 0.7; }
        .btn .btn-text { flex-grow: 1; }
        .btn small { display: block; font-size: 0.85em; opacity: 0.8; margin-top: 5px; font-weight: 400; }
        .btn-start, .btn-continue { font-size: 1.3em; font-weight: bold; text-align: center; background-color: var(--accent-green); color: var(--text-dark); justify-content: center; }
        #intermissionSection .metric-change { font-size: 1.2em; margin: 15px 0; display: flex; align-items: center; gap: 10px; }
        .metric-change .positive { color: var(--accent-green); }
        .metric-change .negative { color: var(--accent-red); }
        #statusBar { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 15px; background-color: var(--text-dark); padding: 15px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #6272a4; }
        #statusBar .metric { text-align: center; font-size: 0.9em; }
        #statusBar .metric .value { font-size: 1.3em; font-weight: bold; color: var(--accent-yellow); }
        .final-metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-top: 20px; width: 100%; max-width: 850px; }
        .metric-card { background-color: var(--section-bg); padding: 25px; border-radius: 8px; text-align: center; border: 1px solid var(--interactive-bg); transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.2); display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 150px; }
        .metric-card:hover { transform: scale(1.05); border-color: var(--accent-blue); }
        .metric-card .icon { font-size: 2.5em; color: var(--accent-blue); margin-bottom: 10px; }
        .metric-card .label { font-size: 1.1em; margin-bottom: 5px; color: var(--text-light); }
        .metric-card .value { font-size: 1.8em; font-weight: bold; color: var(--accent-yellow); }
        .code-block, .siem-log-viewer, .slack-chat { background-color: var(--text-dark); border: 1px solid #6272a4; border-radius: 8px; padding: 20px; margin-top: 15px; white-space: pre-wrap; word-break: break-all; font-family: 'Consolas', monospace; }
        .learning-note { background-color: var(--text-dark); border-left: 5px solid var(--accent-blue); padding: 20px; border-radius: 8px; margin-top: 30px; }
        .scenario-image { width: 100%; max-width: 500px; margin: 25px auto; display: block; border-radius: 8px; border: 1px solid var(--interactive-bg); box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .network-node { position: absolute; width: 30px; height: 30px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 0.9em; font-weight: bold; color: white; cursor: help; z-index: 10; border: 2px solid white; text-shadow: 0 0 5px black; }
        .network-node.infected { background-color: var(--accent-red); animation: pulse 1s infinite alternate; }
        .network-node.isolated { background-color: var(--accent-yellow); color: var(--text-dark); border-color: var(--text-dark); animation: none; }
        @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.1); } }
        #finalSection { text-align: center; }
        #performance-badge-container { margin: 25px 0; }
        #performance-badge { padding: 12px 30px; font-size: 1.8em; font-weight: bold; border-radius: 50px; display: inline-block; color: var(--text-dark); box-shadow: 0 5px 20px rgba(0,0,0,0.4); transition: transform 0.3s ease; }
        #performance-badge:hover { transform: scale(1.05); }
        .post-crisis-layout { display: grid; grid-template-columns: 1fr; gap: 30px; text-align: left; margin-top: 40px; width: 100%; }
        @media (min-width: 800px) { .post-crisis-layout { grid-template-columns: 1fr 1fr; } }
        .event-timeline, .strategic-debrief { background-color: var(--interactive-bg); padding: 25px; border-radius: 8px; border: 1px solid var(--section-bg); margin-top: 20px; }
        .event-timeline h3, .strategic-debrief h3 { margin-top: 0; padding-bottom: 10px; border-bottom: 1px solid var(--section-bg); color: var(--accent-blue); display: flex; align-items: center; gap: 10px; }
        .event-timeline ul { list-style-type: none; padding-left: 0; margin: 15px 0 0 0; }
        .event-timeline li { position: relative; padding: 5px 0 15px 35px; border-left: 2px solid var(--section-bg); font-size: 0.95em; }
        .event-timeline li:last-child { border-left: none; }
        .event-timeline li::before { content: '\f00c'; font-family: 'Font Awesome 6 Free'; font-weight: 900; color: var(--accent-green); position: absolute; left: -12px; top: 5px; background-color: var(--dark-bg); width: 22px; height: 22px; border-radius: 50%; text-align: center; line-height: 22px; font-size: 0.8em; border: 2px solid var(--section-bg); }
        .event-timeline li.positive::before { content: '\f00c'; color: var(--accent-green); }
        .event-timeline li.negative::before { content: '\f00d'; color: var(--accent-red); }
        .event-timeline li.neutral::before { content: '\f05a'; color: var(--accent-blue); }
        .event-timeline li .decision-title { font-weight: bold; color: var(--accent-purple); display: block; margin-bottom: 4px; }
        #strategic-debrief-content p { font-size: 1em; margin-bottom: 15px; }
        #score-breakdown { list-style: none; padding: 0; margin-top: 15px; text-align: left; }
        #score-breakdown li { padding: 8px 12px; border-radius: 6px; margin-bottom: 8px; font-size: 1.05em; display: flex; justify-content: space-between; }
        #score-breakdown .score-plus { background-color: rgba(80, 250, 123, 0.1); border-left: 3px solid var(--accent-green); }
        #score-breakdown .score-minus { background-color: rgba(255, 85, 85, 0.1); border-left: 3px solid var(--accent-red); }
        #score-breakdown .score-neutral { background-color: rgba(139, 233, 253, 0.1); border-left: 3px solid var(--accent-blue); }
        #score-breakdown .score-value { font-weight: bold; }
        .lb-overlay{ display:none; position:fixed; inset:0; background: rgba(10,10,25,.7); -webkit-backdrop-filter: blur(4px); backdrop-filter: blur(4px); z-index:9999; align-items:center; justify-content:center; padding:20px; animation: fadeIn 0.3s ease-out; }
        .lb-modal{ background: linear-gradient(180deg, #2a2a4a 0%, #1f1f36 100%); color: var(--text-light); width:100%; max-width: 760px; border-radius:14px; padding:22px 22px 16px; border:1px solid rgba(255,255,255,.08); box-shadow: 0 18px 50px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.04); }
        .lb-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }
        .lb-title{ display:flex; align-items:center; gap:10px; font-size:1.25em; font-weight:800; letter-spacing:.2px; color: var(--accent-yellow); }
        .lb-title i{ filter: drop-shadow(0 2px 6px rgba(0,0,0,.35)); }
        .lb-tablewrap{ margin-top:10px; max-height: 60vh; overflow:auto; border:1px solid var(--interactive-bg); border-radius:10px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.02); }
        table.lb-table{ width:100%; border-collapse:collapse; font-size:.97em; }
        table.lb-table th, table.lb-table td{ padding:10px 12px; text-align:left; }
        table.lb-table thead th{ position: sticky; top:0; z-index:1; background:#1f1f36; color:#e9e9ff; border-bottom: 1px solid #3b3b66; font-weight:700; letter-spacing:.3px; }
        table.lb-table tbody td{ border-bottom:1px solid rgba(255,255,255,.06); color:#e9e9f5; }
        table.lb-table tbody tr:hover{ background-color: rgba(255,255,255,.045); }
        table.lb-table tbody tr:nth-child(1){ background: linear-gradient(90deg, rgba(255,215,0,.18), transparent 65%); }
        table.lb-table tbody tr:nth-child(1) td:first-child::after{ content:" ğŸ¥‡"; }
        table.lb-table tbody tr:nth-child(2){ background: linear-gradient(90deg, rgba(192,192,192,.18), transparent 65%); }
        table.lb-table tbody tr:nth-child(2) td:first-child::after{ content:" ğŸ¥ˆ"; }
        table.lb-table tbody tr:nth-child(3){ background: linear-gradient(90deg, rgba(205,127,50,.18), transparent 65%); }
        table.lb-table tbody tr:nth-child(3) td:first-child::after{ content:" ğŸ¥‰"; }
        .lb-actions{ display:flex; gap:12px; justify-content:flex-end; margin-top:14px; }
        .lb-close, .lb-refresh{ border:0; border-radius:10px; padding:10px 14px; cursor:pointer; font-weight:700; transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease; }
        .lb-refresh{ background: var(--accent-blue); color:#0c1130; }
        .lb-close{ background: #3d3d60; color:#fff; }
        .lb-refresh:hover{ transform: translateY(-1px); box-shadow: 0 8px 18px rgba(139,233,253,.22); }
        .lb-close:hover{ transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,.35); }
        @media (max-width: 420px){ .lb-title{ font-size:1.05em; } table.lb-table th, table.lb-table td{ padding:9px 10px; } }
    </style>
</head>
<body>
    <div class="container">
        <div id="introSection" class="centered-page">
            <h1><i class="fa-solid fa-shield-virus"></i> Fidye YazÄ±lÄ±mÄ± SimÃ¼lasyonu</h1>
            <p>Bir siber gÃ¼venlik analisti rolÃ¼nÃ¼ Ã¼stlenerek, geliÅŸmekte olan bir fidye yazÄ±lÄ±mÄ± saldÄ±rÄ±sÄ±na mÃ¼dahale edeceksiniz. VereceÄŸiniz kararlar, ÅŸirketin kaderini belirleyecek. HazÄ±r mÄ±sÄ±nÄ±z?</p>
            <img src="giris.png" alt="Fidye yazÄ±lÄ±mÄ± saldÄ±rÄ±sÄ±nÄ± temsil eden siber gÃ¼venlik gÃ¶rseli" class="scenario-image">
            <div class="interactive-element" style="margin-top: 30px; text-align: left;">
                <h4><i class="fa-solid fa-people-group"></i> SimÃ¼lasyon Rolleri </h4>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 10px;"><i class="fa-solid fa-user-shield" style="color:var(--accent-green); margin-right: 10px;"></i> <strong>Siz (Siber GÃ¼venlik Analisti):</strong> Olay mÃ¼dahale ekibinin beynisiniz. Tehdidi analiz edecek, kritik kararlar alacak ve yayÄ±lÄ±mÄ± durduracaksÄ±nÄ±z.</li>
                    <li style="margin-bottom: 10px;"><i class="fa-solid fa-user" style="color:var(--accent-blue); margin-right: 10px;"></i> <strong>Elif HanÄ±m (Ä°nsan KaynaklarÄ± Ã‡alÄ±ÅŸanÄ±):</strong> SaldÄ±rÄ±nÄ±n ilk kurbanÄ±, ancak erken uyarÄ±sÄ±yla kritik bir rol oynuyor.</li>
                    <li style="margin-bottom: 10px;"><i class="fa-solid fa-handshake" style="color:var(--accent-purple); margin-right: 10px;"></i> <strong>YÃ¶netim Kurulu (CEO, CFO, Hukuk):</strong> Åirketin kaderi onlarÄ±n elinde. Finansal, itibari ve yasal riskleri yÃ¶netmek iÃ§in sizin rehberliÄŸinize ihtiyaÃ§larÄ± var.</li>
                    <li style="margin-bottom: 10px;"><i class="fa-solid fa-mask" style="color:var(--accent-red); margin-right: 10px;"></i> <strong>Siber SuÃ§lular (Tehdit AktÃ¶rleri):</strong> AmansÄ±z dÃ¼ÅŸmanlarÄ±nÄ±z. AmaÃ§larÄ± finansal kazanÃ§ ve kaos.</li>
                </ul>
            </div>
            <button class="btn btn-start" id="startButton"><i class="fa-solid fa-play"></i> SimÃ¼lasyonu BaÅŸlat</button>
        </div>

        <div id="intermissionSection" class="centered-page" style="display: none;">
            <h2 id="intermissionTitle"></h2>
            <p id="intermissionText" style="max-width: 600px;"></p>
            <div class="interactive-element" style="width: 100%; max-width: 500px;">
                <h4>Karar Etkileri</h4><div id="intermissionMetrics"></div>
            </div>
            <div class="interactive-element" style="width: 100%; max-width: 500px; border-left-color: var(--accent-blue); margin-top: 20px;">
                <h4>Stratejik DeÄŸerlendirme</h4><p id="strategicText" style="font-size: 1em;"></p>
            </div>
            <button class="btn btn-continue" id="continueButton" style="margin-top: 30px;"><i class="fa-solid fa-forward"></i> Devam Et</button>
        </div>

        <div id="gameContainer" style="display: none;">
            <div id="statusBar">
                <div class="metric"><span><i class="fa-solid fa-computer"></i> Etkilenen Sistemler</span><div class="value" id="status-affectedSystems">1</div></div>
                <div class="metric"><span><i class="fa-solid fa-hand-holding-dollar"></i> Finansal Zarar</span><div class="value" id="status-financialLoss">â‚º0</div></div>
                <div class="metric"><span><i class="fa-solid fa-database"></i> Veri KaybÄ±</span><div class="value" id="status-dataLoss">0%</div></div>
                <div class="metric"><span><i class="fa-solid fa-building-shield"></i> Ä°tibar PuanÄ±</span><div class="value" id="status-reputation">100</div></div>
                <div class="metric" id="status-timer"><span><i class="fa-solid fa-clock"></i> Kalan SÃ¼re</span><div class="value">03:00</div></div>
            </div>
            <div id="game-content"></div>
        </div>
    </div>

    <div class="lb-overlay" id="leaderboardOverlay" role="dialog" aria-modal="true" aria-labelledby="lbTitle">
        <div class="lb-modal">
            <div class="lb-header">
                <h2 id="lbTitle" class="lb-title"><i class="fa-solid fa-trophy"></i> Liderlik Tablosu</h2>
                <span class="lb-sub">Fidye YazÄ±lÄ±mÄ± SimÃ¼lasyonu En Ä°yileri</span>
            </div>
            <div class="lb-tablewrap">
                <table class="lb-table" id="leaderboardTable">
                    <thead>
                        <tr><th>#</th><th>Ä°sim</th><th>Puan</th><th>Tarih</th></tr>
                    </thead>
                    <tbody id="leaderboardBody">
                        <tr><td colspan="4">YÃ¼kleniyorâ€¦</td></tr>
                    </tbody>
                </table>
            </div>
            <div class="lb-actions">
                <button class="lb-refresh" id="lbRefreshBtn"><i class="fa-solid fa-arrows-rotate"></i> Yenile</button>
                <button class="lb-close" id="lbCloseBtn">Kapat</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const game = {
                score: { affectedSystems: 1, financialLoss: 0, dataLoss: 0, reputation: 100 },
                state: { infected: ['hr'], isolated: [], currentSection: 0, decisionHistory: [] },
                elements: {},
                timer: { total: 180, remaining: 180, intervalId: null, running: false },
                decisionInfo: {
                    's1-isolate': { title: "HÄ±zlÄ± MÃ¼dahale!", text: "BilgisayarÄ± anÄ±nda izole ederek saldÄ±rÄ±nÄ±n aÄŸa doÄŸrudan yayÄ±lmasÄ±nÄ± yavaÅŸlattÄ±nÄ±z. Bu proaktif hareket, size deÄŸerli zaman kazandÄ±rdÄ±.", strat: "Proaktif izolasyon, yanal hareketleri Ã¶nlemek ve zaman kazanmak iÃ§in en doÄŸru ilk adÄ±mdÄ±r.", changes: { financialLoss: 5000, newIsolated: ['hr'], reputation: 5 }, impact: 'Positive' },
                    's1-observe': { title: "Kritik Gecikme!", text: "Bekleme kararÄ±nÄ±z, zararlÄ±nÄ±n aÄŸ iÃ§inde kendine bir yer edinmesine ve Dosya Sunucusuna bulaÅŸmasÄ±na neden oldu. Kriz artÄ±k daha bÃ¼yÃ¼k.", strat: "Fidye yazÄ±lÄ±mÄ± gibi hÄ±zlÄ± yayÄ±lan tehditlerde, gÃ¶zlem iÃ§in beklemek genellikle felaketle sonuÃ§lanÄ±r. Ä°lk temas anÄ±nda engelleme esastÄ±r.", changes: { financialLoss: 50000, reputation: -10, affectedSystems: 1, newInfected: ['fs'] }, impact: 'Negative' },
                    's2-segment': { title: "AkÄ±llÄ±ca Savunma!", text: "Kritik sunucularÄ± aÄŸdan ayÄ±rmak, saldÄ±rÄ±nÄ±n en deÄŸerli varlÄ±ÄŸÄ±nÄ±z olan yedekleme sunucusuna ulaÅŸmasÄ±nÄ± engelledi.", strat: "AÄŸ segmentasyonu, hasar kontrolÃ¼ iÃ§in hayati bir tekniktir. SaldÄ±rganÄ±n hareket alanÄ±nÄ± kÄ±sÄ±tlayarak en deÄŸerli varlÄ±klarÄ± korur.", changes: { financialLoss: 150000, reputation: 5, newIsolated: ['bk'] }, impact: 'Positive' },
                    's2-shutdown': { title: "Radikal Ã‡Ã¶zÃ¼m!", text: "TÃ¼m sunucularÄ± kapatmak yayÄ±lÄ±mÄ± bÄ±Ã§ak gibi kesti, ancak ÅŸirket operasyonlarÄ± tamamen durdu.", strat: "Bu yÃ¶ntem 'Ã§ekici vurmak' gibidir. Etkilidir ama iÅŸ sÃ¼rekliliÄŸi Ã¼zerinde yÄ±kÄ±cÄ± bir etkisi vardÄ±r. Genellikle son Ã§are olarak dÃ¼ÅŸÃ¼nÃ¼lmelidir.", changes: { financialLoss: 400000, reputation: -15, newIsolated: ['fs', 'db', 'bk'] }, impact: 'Negative' },
                    's3-restore': { title: "Prensip Sahibi Karar!", text: "Fidye Ã¶demeyi reddederek ve yedekten dÃ¶nerek doÄŸru olanÄ± yaptÄ±nÄ±z. Ancak, 1 haftalÄ±k veri kaybÄ± ve geri yÃ¼kleme sÃ¼reci maliyetli oldu.", strat: "Fidye Ã¶dememek, siber suÃ§lularÄ± caydÄ±rmak iÃ§in Ã¶nemlidir. GÃ¼venilir ve gÃ¼ncel yedekler, bir ÅŸirketin en bÃ¼yÃ¼k gÃ¼vencesidir.", changes: { financialLoss: 500000, reputation: 15, dataLoss: 7 }, impact: 'Positive' },
                    's3-pay': { title: "Riskli Kumar!", text: "Fidyeyi Ã¶dediniz. ÅanslÄ±sÄ±nÄ±z ki saldÄ±rganlar sÃ¶zÃ¼nÃ¼ tuttu. Ancak bu Ã¶deme, siber suÃ§ ekosistemini finanse etti ve ÅŸirketin itibarÄ±nÄ± zedeledi.", strat: "Fidye Ã¶demek, hiÃ§bir zaman verilerin geri alÄ±nacaÄŸÄ±nÄ± veya sÄ±zdÄ±rÄ±lmayacaÄŸÄ±nÄ± garanti etmez. AyrÄ±ca ÅŸirketi gelecekteki saldÄ±rÄ±lar iÃ§in bir hedef haline getirir.", changes: { financialLoss: 5000000, reputation: -40 }, impact: 'Negative' },
                    's4-cut': { title: "Kritik MÃ¼dahale!", text: "Veri sÄ±zÄ±ntÄ±sÄ±nÄ± anÄ±nda keserek mÃ¼ÅŸteri verilerinin daha fazla Ã§alÄ±nmasÄ±nÄ± engellediniz. Bu, ÅŸirketi yasal cezalardan ve daha bÃ¼yÃ¼k bir itibar kaybÄ±ndan kurtardÄ±.", strat: "Veri sÄ±zÄ±ntÄ±sÄ± (data exfiltration) tespit edildiÄŸinde, ilk Ã¶ncelik kanamayÄ± durdurmaktÄ±r. Her saniye Ã¶nemlidir.", changes: { reputation: 10, financialLoss: 50000 }, impact: 'Positive' },
                    's4-honeypot': { title: "Ä°leri Seviye Taktik!", text: "SaldÄ±rganÄ± bir tuzak sisteme yÃ¶nlendirmek, onlarÄ±n taktikleri hakkÄ±nda deÄŸerli bilgiler saÄŸladÄ±. Ancak bu sÃ¼reÃ§te bir miktar daha veri sÄ±zdÄ±rÄ±ldÄ±.", strat: "Honeypot kullanÄ±mÄ±, geliÅŸmiÅŸ bir savunma tekniÄŸidir ancak riskleri vardÄ±r. Durumu kontrol altÄ±nda tutabileceÄŸinizden emin olmalÄ±sÄ±nÄ±z.", changes: { financialLoss: 100000, reputation: -5, dataLoss: 5 }, impact: 'Negative' },
                },

                setup() {
                    this.elements = {
                        intro: document.getElementById('introSection'), game: document.getElementById('gameContainer'), gameContent: document.getElementById('game-content'),
                        startButton: document.getElementById('startButton'), intermission: document.getElementById('intermissionSection'),
                        intermissionTitle: document.getElementById('intermissionTitle'), intermissionText: document.getElementById('intermissionText'),
                        intermissionMetrics: document.getElementById('intermissionMetrics'), strategicText: document.getElementById('strategicText'),
                        continueButton: document.getElementById('continueButton'),
                        statusBar: { 
                            affectedSystems: document.getElementById('status-affectedSystems'), 
                            financialLoss: document.getElementById('status-financialLoss'), 
                            dataLoss: document.getElementById('status-dataLoss'), 
                            reputation: document.getElementById('status-reputation'),
                            timer: document.getElementById('status-timer').querySelector('.value')
                        },
                         leaderboard: {
                            overlay: document.getElementById('leaderboardOverlay'),
                            body: document.getElementById('leaderboardBody'),
                            btnClose: document.getElementById('lbCloseBtn'),
                            btnRefresh: document.getElementById('lbRefreshBtn'),
                            btnOpen: null 
                        }
                    };
                    this.loadGameHTML();
                    this.attachListeners();
                },

                attachListeners() {
                    this.elements.startButton.addEventListener('click', () => {
                        this.elements.intro.style.display = 'none';
                        this.elements.game.style.display = 'block';
                        this.startGlobalTimer();
                        this.showSection(1);
                        this.updateState();
                    });
                    this.elements.gameContent.addEventListener('click', (e) => {
                        const button = e.target.closest('.btn[data-decision]');
                        if (button) this.handleDecision(button.dataset.decision, parseInt(button.dataset.next, 10), button);
                    });
                    this.elements.continueButton.addEventListener('click', () => {
                        const nextSection = parseInt(this.elements.continueButton.dataset.next, 10);
                        this.elements.intermission.style.display = 'none';
                        if (nextSection > 4) {
                           this.showFinalReport();
                        } else {
                            this.elements.game.style.display = 'block';
                            this.showSection(nextSection);
                        }
                    });
                     this.elements.leaderboard.btnClose?.addEventListener('click', () => this.closeLeaderboard());
                     this.elements.leaderboard.btnRefresh?.addEventListener('click', () => this.loadLeaderboard());
                     this.elements.leaderboard.overlay.addEventListener('click', (e) => {
                         if (e.target === this.elements.leaderboard.overlay) this.closeLeaderboard();
                     });
                },
                
                handleDecision(decision, nextSection, button) {
                    button.closest('.decision-buttons').querySelectorAll('.btn').forEach(btn => btn.disabled = true);
                    const info = this.decisionInfo[decision];
                    if (!info) return;

                    this.score.financialLoss += info.changes.financialLoss || 0;
                    this.score.reputation += info.changes.reputation || 0;
                    this.score.dataLoss += info.changes.dataLoss || 0;
                    this.score.affectedSystems += info.changes.affectedSystems || 0;
                    if (info.changes.newInfected) this.state.infected.push(...info.changes.newInfected);
                    if (info.changes.newIsolated) this.state.isolated.push(...info.changes.newIsolated);
                    
                    this.state.decisionHistory.push({ id: decision, title: info.title, impactType: info.impact });
                    this.updateState();
                    this.showIntermission(info.title, info.text, info.strat, info.changes, nextSection);
                },

                showIntermission(title, text, strat, changes, next) {
                    this.elements.intermissionTitle.textContent = title;
                    this.elements.intermissionText.textContent = text;
                    this.elements.strategicText.textContent = strat;
                    
                    let metricsHTML = '';
                    const formatChange = (label, value, unit, icon, isPositive) => `<div class="metric-change ${isPositive ? 'positive' : 'negative'}"><i class="fa-solid ${icon}"></i> ${label}: <i class="fa-solid fa-arrow-${isPositive ? 'up' : 'down'}-long"></i> ${Math.abs(value).toLocaleString('tr-TR')}${unit}</div>`;

                    if (changes.financialLoss) metricsHTML += formatChange('Finansal Zarar', changes.financialLoss, 'â‚º', 'fa-sack-xmark', false);
                    if (changes.dataLoss) metricsHTML += formatChange('Veri KaybÄ±', changes.dataLoss, '%', 'fa-database', false);
                    if (changes.reputation) metricsHTML += formatChange('Ä°tibar PuanÄ±', Math.abs(changes.reputation), '', 'fa-building-shield', changes.reputation > 0);
                    if (changes.affectedSystems) metricsHTML += formatChange('Etkilenen Sistem', changes.affectedSystems, '', 'fa-computer', false);
                    if (metricsHTML === '') metricsHTML = '<p style="text-align: center; font-size: 1.1em; opacity: 0.8;">Bu kararÄ±n metriklere doÄŸrudan bir etkisi olmadÄ±.</p>';

                    this.elements.intermissionMetrics.innerHTML = metricsHTML;
                    this.elements.continueButton.dataset.next = next;
                    this.elements.game.style.display = 'none';
                    this.elements.intermission.style.display = 'flex';
                },

                updateStatusBar() {
                    const s = this.score;
                    this.elements.statusBar.affectedSystems.textContent = s.affectedSystems;
                    this.elements.statusBar.financialLoss.textContent = `â‚º${s.financialLoss.toLocaleString('tr-TR')}`;
                    this.elements.statusBar.dataLoss.textContent = `${s.dataLoss}%`;
                    this.elements.statusBar.reputation.textContent = Math.max(0, s.reputation);
                },

                showSection(index) {
                     this.state.currentSection = index;
                     this.elements.sections.forEach((section, i) => { section.style.display = (i === index - 1) ? 'block' : 'none'; });
                     if (index === 5) this.showFinalReport();
                },
                
                showFinalReport() {
                    this.stopGlobalTimer();
                    this.elements.intro.style.display = 'none';
                    this.elements.intermission.style.display = 'none';
                    this.elements.game.style.display = 'block';
                    document.getElementById('statusBar').style.display = 'none';
                    this.elements.sections.forEach(s => s.style.display = 'none');

                    const finalSection = document.getElementById('finalSection');
                    finalSection.style.display = 'flex';

                    // --- PUANLAMA SÄ°STEMÄ° ---
                    let scoreBreakdown = {};
                    let totalScore = 50; 
                    scoreBreakdown['BaÅŸlangÄ±Ã§ PuanÄ±'] = { value: 50, class: 'score-neutral' };

                    let decisionQualityScore = 0;
                    this.state.decisionHistory.forEach(decision => {
                        if (decision.impactType === 'Negative') decisionQualityScore -= 10;
                        else if (decision.impactType === 'Positive') decisionQualityScore += 10;
                    });
                    totalScore += decisionQualityScore;
                    scoreBreakdown['Karar Kalitesi'] = { value: decisionQualityScore, class: decisionQualityScore >= 0 ? 'score-plus' : 'score-minus' };
                    
                    const paidRansom = this.state.decisionHistory.some(d => d.id === 's3-pay');
                    if(paidRansom) {
                        totalScore -= 25;
                        scoreBreakdown['Fidye Ã–deme CezasÄ±'] = { value: -25, class: 'score-minus' };
                    }

                    let financialScore = 0;
                    if (this.score.financialLoss < 200000) financialScore = 10;
                    else if (this.score.financialLoss > 1000000) financialScore = -15;
                    totalScore += financialScore;
                    scoreBreakdown['Finansal YÃ¶netim'] = { value: financialScore, class: financialScore > 0 ? 'score-plus' : financialScore < 0 ? 'score-minus' : 'score-neutral' };

                    let dataLossScore = 0;
                    if (this.score.dataLoss === 0) dataLossScore = 15;
                    else if (this.score.dataLoss > 5) dataLossScore = -10;
                    totalScore += dataLossScore;
                    scoreBreakdown['Veri BÃ¼tÃ¼nlÃ¼ÄŸÃ¼'] = { value: dataLossScore, class: dataLossScore > 0 ? 'score-plus' : 'score-minus' };

                    if (this.timer.remaining > 60) {
                        totalScore += 10;
                        scoreBreakdown['HÄ±zlÄ± MÃ¼dahale Bonusu'] = { value: 10, class: 'score-plus' };
                    }
                    totalScore = Math.round(Math.max(0, Math.min(100, totalScore)));
                    // --- PUANLAMA SONU ---

                    let badgeInfo = {};
                    if (totalScore >= 90) badgeInfo = { text: 'SÄ°BER MUHAFIZ', color: 'var(--accent-green)' };
                    else if (totalScore >= 70) badgeInfo = { text: 'SÄ°STEM SAVUNUCUSU', color: 'var(--accent-blue)' };
                    else if (totalScore >= 45) badgeInfo = { text: 'HASAR KONTROL', color: 'var(--accent-yellow)' };
                    else badgeInfo = { text: 'SÄ°STEM Ã‡Ã–KÃœÅÃœ', color: 'var(--accent-red)' };

                    document.getElementById('performance-badge').textContent = badgeInfo.text;
                    document.getElementById('performance-badge').style.backgroundColor = badgeInfo.color;

                    document.getElementById('finalMetricsContainer').innerHTML = `
                        <div class="metric-card"><div class="icon"><i class="fa-solid fa-file-invoice-dollar"></i></div><div class="label">Nihai Puan</div><div class="value">${totalScore}/100</div></div>
                        <div class="metric-card"><div class="icon"><i class="fa-solid fa-building-shield"></i></div><div class="label">Ä°tibar PuanÄ±</div><div class="value">${Math.max(0, this.score.reputation)}/100</div></div>
                        <div class="metric-card"><div class="icon"><i class="fa-solid fa-hand-holding-dollar"></i></div><div class="label">Finansal Zarar</div><div class="value">â‚º${this.score.financialLoss.toLocaleString('tr-TR')}</div></div>
                        <div class="metric-card"><div class="icon"><i class="fa-solid fa-database"></i></div><div class="label">Veri KaybÄ±</div><div class="value">${this.score.dataLoss}%</div></div>
                    `;

                    document.getElementById('decision-timeline-list').innerHTML = this.state.decisionHistory.map(decision => 
                        `<li class="${decision.impactType.toLowerCase()}"><span class="decision-title">${this.decisionInfo[decision.id].title}</span></li>`
                    ).join('');
                    
                    document.getElementById('score-breakdown').innerHTML = Object.entries(scoreBreakdown).map(([key, item]) => 
                        `<li class="${item.class}"><span>${key}</span><span class="score-value">${item.value >= 0 ? '+' : ''}${item.value} Puan</span></li>`
                    ).join('');
                    
                    let debriefHTML = '';
                    if (totalScore >= 70) {
                        debriefHTML = `<p><strong>MÃ¼kemmel Kriz YÃ¶netimi:</strong> SaldÄ±rÄ±yÄ± erken aÅŸamada kontrol altÄ±na aldÄ±nÄ±z, doÄŸru kararlarla yayÄ±lÄ±mÄ± engellediniz ve ÅŸirketi bÃ¼yÃ¼k bir felaketten kurtardÄ±nÄ±z. Fidye Ã¶demeyerek siber suÃ§la mÃ¼cadelede doÄŸru bir duruÅŸ sergilediniz.</p>`;
                    } else if (totalScore >= 45) {
                        debriefHTML = `<p><strong>Zorlu MÃ¼cadele:</strong> Krizi yÃ¶netmeyi baÅŸardÄ±nÄ±z ancak bazÄ± gecikmeler veya riskli kararlar, ÅŸirkete hem finansal hem de operasyonel olarak zarar verdi. Bu olay, yedekleme ve aÄŸ segmentasyon stratejilerimizi gÃ¶zden geÃ§irmemiz iÃ§in kritik dersler iÃ§eriyor.</p>`;
                    } else {
                        debriefHTML = `<p><strong>Ciddi SonuÃ§lar:</strong> Kriz yÃ¶netimi sÃ¼recindeki kritik hatalar, fidye yazÄ±lÄ±mÄ±nÄ±n bÃ¼yÃ¼k hasar vermesine neden oldu. Ã–zellikle fidye Ã¶deme kararÄ± (eÄŸer alÄ±ndÄ±ysa) veya yavaÅŸ mÃ¼dahale, ÅŸirketi hem finansal hem de itibar aÃ§Ä±sÄ±ndan aÄŸÄ±r bir yÃ¼kÃ¼n altÄ±na soktu.</p>`;
                    }
                    document.getElementById('strategic-debrief-content').innerHTML = debriefHTML;

                    this.saveLeaderboard(totalScore);
                },

                updateState() { this.updateStatusBar(); this.updateSiemLogs(); },
                updateSiemLogs() {
                    if (!this.elements.siemLogs2) return;
                    let html = `<div><span style="color:var(--accent-yellow);">[09:45:12] UYARI: HR-PC-ELIF (192.168.1.112) Ã¼zerinden anormal PowerShell aktivitesi.</span></div>`;
                    if (this.state.infected.includes('fs')) {
                        html += `<div><span style="color:var(--accent-red); font-weight:bold;">[10:05:11] KRÄ°TÄ°K: FileServer (192.168.1.50) Ã¼zerinde Mimikatz (kimlik bilgisi Ã§alma) aktivitesi!</span></div>`;
                    }
                    if (this.state.infected.includes('db')) {
                        html += `<div><span style="color:var(--accent-red); font-weight:bold;">[10:15:40] KRÄ°TÄ°K: DB-Server (192.168.1.70) Ã¼zerinde anormal dosya ÅŸifreleme aktivitesi!</span></div>`;
                    }
                    if (!this.state.infected.includes('fs') && !this.state.infected.includes('db')) {
                        html += `<div><span style="color:var(--accent-green);">[10:00:00] Sunucu aÄŸÄ±nda ÅŸimdilik baÅŸka bir ÅŸÃ¼pheli aktivite yok.</span></div>`;
                    }
                    this.elements.siemLogs2.innerHTML = html;
                },

                startGlobalTimer() {
                    if (this.timer.running) return;
                    this.timer.running = true;
                    this.timer.intervalId = setInterval(() => {
                        this.timer.remaining--;
                        this.updateTimerUI();
                        if (this.timer.remaining <= 0) {
                            this.stopGlobalTimer();
                            alert("SÃ¼re doldu! Rapor oluÅŸturuluyor.");
                            this.showFinalReport();
                        }
                    }, 1000);
                },
                stopGlobalTimer() { clearInterval(this.timer.intervalId); this.timer.running = false; },
                updateTimerUI() {
                    const m = String(Math.floor(this.timer.remaining / 60)).padStart(2, '0');
                    const s = String(this.timer.remaining % 60).padStart(2, '0');
                    if (this.elements.statusBar.timer) this.elements.statusBar.timer.textContent = `${m}:${s}`;
                },

                openLeaderboard() { this.elements.leaderboard.overlay.style.display = 'flex'; this.loadLeaderboard(); },
                closeLeaderboard() { this.elements.leaderboard.overlay.style.display = 'none'; },
                async saveLeaderboard(finalScore) {
                    let name = localStorage.getItem('playerName') || prompt("Liderlik tablosu iÃ§in isminizi girin:", "Anonim") || "Anonim";
                    localStorage.setItem('playerName', name);
                    const payload = { scenario: 'v4-ransomware', name: name.slice(0, 40), score: finalScore, timestamp: new Date().toISOString() };
                    try {
                        const res = await fetch('/api/score', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                        if (!res.ok) throw new Error('API request failed');
                    } catch(e) {
                        const key = 'leaderboard-v4-ransomware';
                        const arr = JSON.parse(localStorage.getItem(key) || '[]');
                        arr.push(payload);
                        localStorage.setItem(key, JSON.stringify(arr.sort((a,b)=> b.score - a.score).slice(0,100)));
                    }
                },
                async loadLeaderboard() {
                    const tbody = this.elements.leaderboard.body;
                    tbody.innerHTML = `<tr><td colspan="4">YÃ¼kleniyorâ€¦</td></tr>`;
                    let rows = [];
                    try {
                        const res = await fetch('/api/leaderboard?scenario=v4-ransomware');
                        if (!res.ok) throw new Error('API request failed');
                        rows = await res.json();
                    } catch(e) {
                        rows = JSON.parse(localStorage.getItem('leaderboard-v4-ransomware') || '[]');
                    }
                    if (!rows.length) {
                        tbody.innerHTML = `<tr><td colspan="4">HenÃ¼z kayÄ±t bulunmuyor.</td></tr>`;
                        return;
                    }
                    tbody.innerHTML = rows.sort((a,b)=> b.score - a.score).slice(0,50).map((r,i)=>`<tr><td>${i+1}</td><td>${r.name}</td><td>${r.score}</td><td>${new Date(r.timestamp).toLocaleString('tr-TR')}</td></tr>`).join('');
                },

                loadGameHTML() {
                    const gameHTMLContent = `
                        <div id="section1" class="section">
                            <div id="s1-part1">
                                <h2><i class="fa-solid fa-envelope-open-text"></i> BÃ¶lÃ¼m 1: Beklenmedik Misafir</h2>
                                <p>Ä°nsan KaynaklarÄ± departmanÄ±ndan Elif HanÄ±m, "CV_Ozgecmis.docx" isimli bir e-posta ekini aÃ§ar. DosyanÄ±n zararsÄ±z gÃ¶rÃ¼ndÃ¼ÄŸÃ¼nÃ¼ ancak bilgisayarÄ±nÄ±n yavaÅŸladÄ±ÄŸÄ±nÄ± rapor eder.</p>
                                <img src="elif_eposta.png" alt="E-posta aÃ§an Ã§alÄ±ÅŸan" class="scenario-image">
                                <button class="btn btn-continue" style="margin: 20px auto 0;" onclick="document.getElementById('s1-part1').style.display='none'; document.getElementById('s1-part2').style.display='block';"><i class="fa-solid fa-arrow-right"></i> Analize BaÅŸla</button>
                            </div>
                            <div id="s1-part2" style="display:none; animation: fadeIn 0.5s ease-out;">
                                 <div class="interactive-element"><h4><i class="fa-solid fa-file-waveform"></i> Ä°lk Bulgular</h4>
                                    <p>E-posta ve dosya analizi, belgenin iÃ§inde gizlenmiÅŸ ÅŸifreli bir PowerShell komutu Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±nÄ± ortaya Ã§Ä±kardÄ±.</p>
                                    <img src="ilk_bulgular.png" alt="ZararlÄ± kod analizi" class="scenario-image">
                                    <div class="code-block"><pre><code class="language-powershell">powershell.exe -NoP -NonI -Exec Bypass -EncodedCommand JABjAGwAaQBlAG4AdA....</code></pre></div>
                                </div>
                                <div class="decision-buttons">
                                    <button class="btn critical" data-decision="s1-isolate" data-next="2"><i class="fa-solid fa-person-running"></i><div class="btn-text">SeÃ§enek A: Elif HanÄ±m'Ä±n bilgisayarÄ±nÄ± hemen aÄŸdan izole et.<small>AnÄ±nda mÃ¼dahale, yayÄ±lÄ±mÄ± Ã¶nleyebilir.</small></div></button>
                                    <button class="btn" data-decision="s1-observe" data-next="2"><i class="fa-solid fa-magnifying-glass"></i><div class="btn-text">SeÃ§enek B: Daha fazla kanÄ±t toplamak iÃ§in ÅŸÃ¼pheli aktiviteyi izle.<small>Emin olmadan aksiyon almak iÅŸleri durdurabilir.</small></div></button>
                                </div>
                                <div class="learning-note"><strong>Ã–ÄŸrenme Notu:</strong> Oltalama (phishing) e-postalarÄ±, fidye yazÄ±lÄ±mlarÄ±nÄ±n en yaygÄ±n baÅŸlangÄ±Ã§ noktasÄ±dÄ±r. HÄ±zlÄ± izolasyon, yanal hareketleri Ã¶nlemenin anahtarÄ±dÄ±r.</div>
                            </div>
                        </div>
                        
                        <div id="section2" class="section">
                            <h2><i class="fa-solid fa-network-wired"></i> BÃ¶lÃ¼m 2: Zincirleme Reaksiyon</h2>
                            <p>ZararlÄ± yazÄ±lÄ±m, aÄŸda yayÄ±lmaya baÅŸladÄ±. SaldÄ±rganlar, ele geÃ§irdikleri kimlik bilgileriyle sunucular arasÄ±nda hareket ediyor.</p>
                            <div class="interactive-element">
                                <h4><i class="fa-solid fa-map-location-dot"></i> AÄŸ HaritasÄ±</h4>
                                <div id="network-map-container-2">
                                    <img src="network_map_bg.png" alt="AÄŸ HaritasÄ±" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: 1; opacity: 0.4;">
                                    </div>
                             <div class="interactive-element"><h4><i class="fa-solid fa-terminal"></i> SIEM LoglarÄ±</h4><div class="siem-log-viewer" id="siemLogs2"></div></div>
                            <div class="decision-buttons">
                                <button class="btn" data-decision="s2-segment" data-next="3"><i class="fa-solid fa-diagram-project"></i><div class="btn-text">SeÃ§enek A: Kritik sunucularÄ± aÄŸdan ayÄ±rarak izole et.<small>HasarÄ± sÄ±nÄ±rlar ama karmaÅŸÄ±k bir iÅŸlemdir.</small></div></button>
                                <button class="btn" data-decision="s2-shutdown" data-next="3"><i class="fa-solid fa-power-off"></i><div class="btn-text">SeÃ§enek B: YayÄ±lÄ±mÄ± tamamen durdurmak iÃ§in etkilenen tÃ¼m sunucularÄ± kapat.<small>Etkili ama operasyonlarÄ± tamamen durdurur.</small></div></button>
                            </div>
                            <div class="learning-note"><strong>Ã–ÄŸrenme Notu:</strong> AÄŸ segmentasyonu, bir saldÄ±rganÄ±n aÄŸÄ±n tamamÄ±na eriÅŸmesini engelleyen kritik bir savunma mekanizmasÄ±dÄ±r.</div>
                        </div>
                        
                        <div id="section3" class="section">
                            <h2><i class="fa-solid fa-users-viewfinder"></i> BÃ¶lÃ¼m 3: Kriz MasasÄ± ve Fidye Notu</h2>
                            <p>Dosyalar ÅŸifrelenmeye baÅŸladÄ± ve sunucularda bir fidye notu belirdi. SaldÄ±rganlar 5 Milyon TL talep ediyor ve verileri sÄ±zdÄ±rmakla tehdit ediyor. YÃ¶netim panik iÃ§inde.</p>
                             <img src="yonetim_toplantisi.png" alt="Kriz masasÄ± toplantÄ±sÄ±" class="scenario-image">
                            <div class="interactive-element"><h4><i class="fa-solid fa-comments"></i> YÃ¶netim Acil Durum KanalÄ±</h4><div class="slack-chat"><div><span style="font-weight:bold; color:var(--accent-pink);">CEO:</span> Ä°tibarÄ±mÄ±z mahvolacak! MÃ¼ÅŸteri verileri gÃ¼vende mi? Bu krizi hemen bitirin!</div><div style="margin-top: 10px;"><span style="font-weight:bold; color:var(--accent-yellow);">CFO:</span> 5 Milyon TL! Bu parayÄ± Ã¶dersek iflas ederiz. Yedeklerimizden dÃ¶nemiyor muyuz?</div><div style="margin-top: 10px;"><span style="font-weight:bold; color:var(--accent-blue);">Hukuk MÃ¼ÅŸaviri:</span> Fidyeyi Ã¶demek yasa dÄ±ÅŸÄ± faaliyetleri finanse etmek anlamÄ±na gelebilir ve yasal sonuÃ§larÄ± olabilir.</div></div></div>
                            <div class="decision-buttons">
                                <button class="btn" data-decision="s3-restore" data-next="4"><i class="fa-solid fa-clock-rotate-left"></i><div class="btn-text">SeÃ§enek A: Fidyeyi Ã¶deme. Bir hafta eski olan temiz yedeklerden dÃ¶n.<small>Veri kaybÄ± yaÅŸanÄ±r ama suÃ§lulara para gitmez.</small></div></button>
                                <button class="btn critical" data-decision="s3-pay" data-next="4"><i class="fa-solid fa-money-bill-wave"></i><div class="btn-text">SeÃ§enek B: Åirketin geleceÄŸini riske atma, fidyeyi Ã¶de.<small>HÄ±zlÄ± Ã§Ã¶zÃ¼m olabilir ama garantisi yok ve Ã§ok maliyetli.</small></div></button>
                            </div>
                            <div class="learning-note"><strong>Ã–ÄŸrenme Notu:</strong> Fidye Ã¶deme kararÄ± sadece teknik bir karar deÄŸildir. Finansal, yasal ve etik boyutlarÄ± vardÄ±r.</div>
                        </div>
                        
                        <div id="section4" class="section">
                            <h2><i class="fa-solid fa-user-secret"></i> BÃ¶lÃ¼m 4: Gizli Tehdit: Veri SÄ±zÄ±ntÄ±sÄ±</h2>
                            <p>Ekibiniz ÅŸifrelenmiÅŸ dosyalarla uÄŸraÅŸÄ±rken, tehdit avÄ± araÃ§larÄ± daha sinsi bir tehlikeyi ortaya Ã§Ä±kardÄ±: SaldÄ±rganlar bir yandan dosyalarÄ± ÅŸifrelerken, diÄŸer yandan da mÃ¼ÅŸteri veritabanÄ±ndan dÄ±ÅŸarÄ±ya aktif olarak veri sÄ±zdÄ±rÄ±yor (Ã‡ifte Åantaj)!</p>
                            <img src="siem_ekrani.png" alt="SIEM log ekranÄ±" class="scenario-image">
                            <div class="interactive-element"><h4><i class="fa-solid fa-terminal"></i> SIEM LoglarÄ±</h4><div class="siem-log-viewer"><div style="color:var(--accent-red); font-weight: bold;">[11:45:10] KRÄ°TÄ°K: DB-Server (192.168.1.70) Ã¼zerinden bilinmeyen bir dÄ±ÅŸ IP'ye (81.25.11.92) ÅŸifreli ve sÃ¼rekli veri akÄ±ÅŸÄ± tespit edildi!</div></div></div>
                            <div class="decision-buttons">
                                <button class="btn critical" data-decision="s4-cut" data-next="5"><i class="fa-solid fa-scissors"></i><div class="btn-text">SeÃ§enek A: Veri sÄ±zÄ±ntÄ±sÄ±nÄ± hemen durdurmak iÃ§in sunucunun dÄ±ÅŸ aÄŸ baÄŸlantÄ±sÄ±nÄ± kes.<small>KanamayÄ± durdurur ama sunucuyu tamamen Ã§evrimdÄ±ÅŸÄ± bÄ±rakÄ±r.</small></div></button>
                                <button class="btn" data-decision="s4-honeypot" data-next="5"><i class="fa-solid fa-hat-cowboy-side"></i><div class="btn-text">SeÃ§enek B: SaldÄ±rganÄ± yanÄ±ltmak ve ne Ã§aldÄ±ÄŸÄ±nÄ± anlamak iÃ§in baÄŸlantÄ±yÄ± bir tuzak (honeypot) sisteme yÃ¶nlendir.<small>DeÄŸerli bilgi saÄŸlar ama riskli ve zaman alÄ±cÄ±dÄ±r.</small></div></button>
                            </div>
                            <div class="learning-note"><strong>Ã–ÄŸrenme Notu:</strong> Modern fidye yazÄ±lÄ±mÄ± saldÄ±rÄ±larÄ± genellikle "Ã§ifte ÅŸantaj" taktiÄŸi kullanÄ±r.</div>
                        </div>

                        <div id="finalSection" class="section centered-page" style="display: none;">
                            <h2><i class="fa-solid fa-chart-line"></i> Kriz SonrasÄ± DeÄŸerlendirme Raporu</h2>
                            <p>SimÃ¼lasyon tamamlandÄ±. Kriz yÃ¶netimi performansÄ±nÄ±zÄ±n detaylÄ± dÃ¶kÃ¼mÃ¼ aÅŸaÄŸÄ±dadÄ±r.</p>
                            <div id="performance-badge-container"><span id="performance-badge"></span></div>
                            <div class="final-metrics" id="finalMetricsContainer"></div>
                            <div class="post-crisis-layout">
                                <div class="event-timeline">
                                    <h3><i class="fa-solid fa-timeline"></i> Karar Zaman TÃ¼neli</h3>
                                    <ul id="decision-timeline-list"></ul>
                                </div>
                                <div class="strategic-debrief">
                                    <h3><i class="fa-solid fa-lightbulb"></i> Stratejik DeÄŸerlendirme</h3>
                                    <div id="strategic-debrief-content"></div>
                                    <h3 style="margin-top: 20px;"><i class="fa-solid fa-calculator"></i> Puan DÃ¶kÃ¼mÃ¼</h3>
                                    <ul id="score-breakdown"></ul>
                                </div>
                            </div>
                            <div class="decision-buttons" style="margin-top: 40px; display:flex; gap:12px; flex-wrap:wrap; justify-content:center;">
                                <button class="btn btn-start" onclick="location.reload()"><i class="fa-solid fa-arrow-rotate-right"></i> SimÃ¼lasyonu Yeniden BaÅŸlat</button>
                                <button class="btn" id="openLeaderboardBtn"><i class="fa-solid fa-trophy"></i> Liderlik Tablosu</button>
                            </div>
                        </div>
                    `;
                    this.elements.gameContent.innerHTML = gameHTMLContent;
                    this.queryAndSetupDynamicElements();
                },

                queryAndSetupDynamicElements() {
                    this.elements.sections = this.elements.gameContent.querySelectorAll('.section');
                    this.elements.siemLogs2 = document.getElementById('siemLogs2');
                    this.elements.leaderboard.btnOpen = document.getElementById('openLeaderboardBtn');
                    this.elements.leaderboard.btnOpen?.addEventListener('click', () => this.openLeaderboard());
                    hljs.highlightAll();
                }
            };
            game.setup();
        });
    </script>
</body>
</html>
